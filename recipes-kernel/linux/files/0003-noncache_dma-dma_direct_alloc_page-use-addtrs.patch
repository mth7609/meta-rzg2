From a2910ebc4623158bac53d0d4e30c8d207142f2de Mon Sep 17 00:00:00 2001
From: Nhan Nguyen <nhan.nguyen.yb@renesas.com>
Date: Mon, 4 Apr 2022 15:50:51 +0700
Subject: [PATCH] noncache_dma: dma_direct_alloc_page use addtrs

---
 drivers/soc/renesas/rzfive/noncache_dma.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/soc/renesas/rzfive/noncache_dma.c b/drivers/soc/renesas/rzfive/noncache_dma.c
index 2415d54e737f..4f070078781d 100644
--- a/drivers/soc/renesas/rzfive/noncache_dma.c
+++ b/drivers/soc/renesas/rzfive/noncache_dma.c
@@ -60,7 +60,7 @@ void *arch_dma_alloc(struct device *dev, size_t size, dma_addr_t *handle,
 	void* kvaddr, *coherent_kvaddr;
 	size = PAGE_ALIGN(size);
 
-	kvaddr = dma_direct_alloc_pages(dev, size, handle, gfp & (~__GFP_DIRECT_RECLAIM), attrs);
+	kvaddr = dma_direct_alloc_pages(dev, size, handle, gfp, attrs);
 	if (!kvaddr)
 		goto no_mem;
 
-- 
2.25.1

